<!-- templates/configuracion_general.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Configuración General - Inventario</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<div class="container py-5">
  <h1 class="mb-4 text-center">⚙️ Configuración General</h1>

  <!-- Mensajes de confirmación -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mt-2">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <form method="POST" class="bg-white p-4 rounded shadow-sm">
    <!-- Empresa por defecto -->
    <div class="mb-3">
      <label for="empresa_default" class="form-label">🏢 Empresa por defecto:</label>
      <input type="text" name="empresa_default" id="empresa_default"
             class="form-control"
             value="{{ config.get('empresa_default', '') }}">
    </div>

    <!-- Usar fecha del archivo -->
    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input"
             name="usar_fecha_archivo" id="usar_fecha_archivo"
             {% if config.get('usar_fecha_archivo') %}checked{% endif %}>
      <label for="usar_fecha_archivo" class="form-check-label">
        📅 Usar fecha del archivo si no hay fecha en columnas
      </label>
    </div>

    <!-- Formato de fecha -->
    <div class="mb-3">
      <label for="fecha_formato" class="form-label">📌 Formato de fecha:</label>
      <input type="text" name="fecha_formato" id="fecha_formato"
             class="form-control"
             value="{{ config.get('fecha_formato', '%Y-%m-%d') }}">
      <div class="form-text">Ejemplo: <code>%d/%m/%Y</code>, <code>%Y-%m-%d</code></div>
    </div>

    <hr class="my-4">

    <h4 class="mb-3">📄 Configuración de Reportes PDF</h4>

    <!-- Filas en resumen -->
    <div class="mb-3">
      <label for="pdf_resumen_filas" class="form-label">Número de filas en resumen:</label>
      <input type="number" min="1" max="100"
             name="pdf_resumen_filas" id="pdf_resumen_filas"
             class="form-control"
             value="{{ config.get('pdf_resumen_filas', 10) }}">
    </div>

    <!-- Fuente en tabla completa -->
    <div class="mb-3">
      <label for="pdf_fuente_completa" class="form-label">Tamaño de fuente en tabla completa:</label>
      <input type="number" min="6" max="16"
             name="pdf_fuente_completa" id="pdf_fuente_completa"
             class="form-control"
             value="{{ config.get('pdf_fuente_completa', 6) }}">
    </div>

    <div class="text-center mt-4">
      <button type="submit" class="btn btn-primary">💾 Guardar configuración</button>
      <a href="{{ url_for('index') }}" class="btn btn-secondary">⬅ Volver</a>
    </div>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
